<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap" rel="stylesheet">
    <link rel="posting_stylesheet" type="text/css" href="/css/posting_stylesheet.css">
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>게시글쓰기</title>

    <script>

           $(document).ready(function () {

           });

           function isValidContents(contents) {
               if (contents == '') {
                   alert('내용을 입력해주세요');
                   return false;
               }
               return true;
           }

           function post() {
               let title = $('#post_title').val();
               let contents = $('#post_contents').val();
               let password = $('#post_password').val();
               let username = $('#post_username').val();

               if (isValidContents(contents) == false) {
                   return;
               }
               if (isValidContents(username) == false) {
                   return;
               }
               if (isValidContents(title) == false) {
                   return;
               }
               if (isValidContents(password) == false) {
                   return;
               }
               let post_data = {
                   'title' : title,
                   'username' : username,
                   'contents' : contents,
                   'password' : password
               }
               $.ajax({
                   type: 'POST',
                   url: '/api/homeworks',
                   // accept: "application/json",
                   // contentType: "application/json; charset=utf-8",
                   contentType: "application/json",
                   data: JSON.stringify(post_data),
                   // dataType: "json",
                   success: function (response) {
                       alert("성공");
                       window.location.href = 'index.html';
                       }
                   });
               }
    </script>
</head>
<body>
<div id="posting_form">
    <div id="posting_title">ㅎㅇㅎㅇ</div>
<!--    <form action="/api/homeworks" method="post">-->
    <form>

        <div class="">제목</div>
        <input type="text" name="title" id="post_title" class="">

        <div class="">작성자명</div>
        <input type="text" name="username" id="post_username" class="">

        <div class="">내용</div>
        <textarea name="content" id="post_contents" cols="50" rows="15"></textarea>


        <div class="">비밀번호</div>
        <input type="password" id="post_password" name="password" class="">



        <button onclick="post">등록하기</button>

    </form>
</div>
</body>
<script>
    // const href = location.href;
    // const queryString = href.substring(href.indexOf("?")+1)
    // if (queryString === 'error') {
    //     const errorDiv = document.getElementById('login-failed');
    //     errorDiv.style.display = 'block';
    // }
</script>
</html>